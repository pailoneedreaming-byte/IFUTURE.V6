<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modern Workspace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ---------- Global ---------- */
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;font-family:'Segoe UI',sans-serif;color:#eee;background:#000;overflow:hidden;}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}

/* ---------- Layout ---------- */
header{display:flex;align-items:center;padding:1rem;position:relative;z-index:10;}
.profile-pic{width:50px;height:50px;border-radius:50%;background:#555;margin-right:1rem;}
.welcome{flex:1;font-size:1.1rem;}
.burger{cursor:pointer;width:30px;height:30px;display:flex;flex-direction:column;justify-content:space-around;}
.burger span{width:100%;height:3px;background:#fff;transition:0.3s;}

.sidebar{position:fixed;top:0;left:-250px;width:250px;height:100%;background:rgba(20,20,20,0.95);transition:left 0.3s;z-index:20;padding:2rem 1rem;}
.sidebar.active{left:0;}
.sidebar a{display:block;padding:1rem;color:#ccc;text-decoration:none;font-weight:600;transition:0.2s;}
.sidebar a:hover{background:#333;color:#fff;}

main{padding:1rem;display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;height:calc(100vh - 80px);overflow:auto;}
.box{position:relative;background:rgba(30,30,30,0.8);border-radius:12px;padding:1.5rem;transition:transform 0.2s;cursor:pointer;}
.box:hover{transform:translateY(-4px);}
.box h3{margin-bottom:0.5rem;}
.pill{position:absolute;top:8px;right:8px;background:#e91e63;color:#fff;font-size:0.7rem;padding:2px 6px;border-radius:8px;opacity:0;transition:opacity 0.2s;}
.box:hover .pill{opacity:1;}

/* News widget */
.news-widget{position:fixed;bottom:20px;right:20px;width:120px;height:60px;background:rgba(30,30,30,0.9);border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:0.4s;z-index:15;}
.news-widget.expanded{width:80vw;height:80vh;bottom:10vh;right:10vw;border-radius:16px;padding:2rem;overflow:auto;}
.news-widget h4{margin-bottom:1rem;}
.news-widget p{line-height:1.5;}

/* AI Assistant page */
#ai-page{display:none;flex-direction:column;height:100%;}
#ai-page.active{display:flex;}
.chat{display:flex;flex-direction:column;flex:1;overflow:auto;padding:1rem;}
.message{padding:0.8rem 1.2rem;border-radius:12px;margin:0.5rem 0;max-width:80%;word-wrap:break-word;}
.user{background:#e91e63;align-self:flex-end;}
.ai{background:#333;align-self:flex-start;}
.input-bar{display:flex;padding:0.5rem;background:#111;}
.input-bar input{flex:1;padding:0.8rem;border:none;border-radius:8px;background:#222;color:#fff;margin-right:0.5rem;}
.input-bar button{padding:0.8rem 1.2rem;background:#e91e63;border:none;border-radius:8px;color:#fff;cursor:pointer;}

/* Responsive */
@media (max-width:768px){main{grid-template-columns:1fr;}}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<header>
  <div class="burger" onclick="toggleSidebar()">
    <span></span><span></span><span></span>
  </div>
  <img src="https://i.pravatar.cc/50" alt="User" class="profile-pic">
  <div class="welcome">Welcome back</div>
</header>

<nav class="sidebar" id="sidebar">
  <a href="#" onclick="showPage('work')">Work</a>
  <a href="#" onclick="showPage('home')">Home</a>
  <a href="#" onclick="showPage('casual')">Casual</a>
  <a href="#" onclick="showPage('ai')">AI Assistant</a>
</nav>

<main id="mainContent">
  <!-- ==== WORK PAGE ==== -->
  <div id="work" class="page active">
    <div class="box" onclick="openBox('email')"><h3>Email</h3><div class="pill" id="emailPill">0</div></div>
    <div class="box" onclick="openBox('projects')"><h3>Projects</h3><div class="pill" id="projPill">0</div></div>
    <div class="box" onclick="openBox('requests')"><h3>Requests</h3><div class="pill" id="reqPill">0</div></div>
    <div class="box" onclick="openBox('contacts')"><h3>Contacts</h3><div class="pill" id="contPill">0</div></div>
  </div>

  <!-- ==== HOME PAGE ==== -->
  <div id="home" class="page">
    <div class="box" onclick="openBox('recipes')"><h3>Recipes</h3></div>
    <div class="box" onclick="openBox('kitchen')"><h3>Kitchen Help</h3></div>
    <div class="box" onclick="openBox('cleaning')"><h3>Cleaning Help</h3></div>
  </div>

  <!-- ==== CASUAL PAGE ==== -->
  <div id="casual" class="page">
    <div id="customArea" contenteditable="true" style="min-height:200px;padding:1rem;background:rgba(40,40,40,0.8);border-radius:12px;">
      Click here and type anything – fully editable!
    </div>
  </div>

  <!-- ==== AI ASSISTANT PAGE ==== -->
  <div id="ai" class="page" style="display:none;">
    <div id="ai-page" class="active">
      <div class="chat" id="chat"></div>
      <div class="input-bar">
        <input type="text" id="aiInput" placeholder="Ask me anything…" onkeypress="if(event.key==='Enter')sendAI()">
        <button onclick="sendAI()">Send</button>
      </div>
    </div>
  </div>
</main>

<div class="news-widget" id="newsWidget" onclick="toggleNews()">
  <div id="newsContent"><strong>News</strong></div>
</div>

<script>
// ---------- Background animation ----------
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
let particles = [];

class Particle {
  constructor(){this.reset();}
  reset(){
    this.x = Math.random()*canvas.width;
    this.y = Math.random()*canvas.height;
    this.size = Math.random()*3+1;
    this.speedX = Math.random()*1.5-0.75;
    this.speedY = Math.random()*1.5-0.75;
    this.color = `hsl(${Math.random()*60+200},70%,60%)`;
  }
  update(){
    this.x += this.speedX; this.y += this.speedY;
    if(this.x<0||this.x>canvas.width) this.speedX*=-1;
    if(this.y<0||this.y>canvas.height) this.speedY*=-1;
  }
  draw(){
    ctx.fillStyle = this.color;
    ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill();
  }
}
for(let i=0;i<80;i++) particles.push(new Particle());

function animate(){
  ctx.fillStyle = 'rgba(0,0,0,0.05)'; ctx.fillRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{p.update();p.draw();});
  requestAnimationFrame(animate);
}
animate();
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

// ---------- UI helpers ----------
function toggleSidebar(){
  const sb = document.getElementById('sidebar');
  const burger = document.querySelector('.burger');
  sb.classList.toggle('active');
  burger.classList.toggle('active');
  burger.innerHTML = sb.classList.contains('active')?
    `<span style="transform:rotate(45deg) translate(5px,5px);"></span><span style="opacity:0;"></span><span style="transform:rotate(-45deg) translate(7px,-6px);"></span>`:
    `<span></span><span></span><span></span>`;
}
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('mainContent').style.display = (id==='ai')?'none':'grid';
  document.getElementById('ai-page').classList.toggle('active',id==='ai');
  toggleSidebar();
}

//: false;
}

// ---------- Box modal (email/projects/etc.) ----------
function openBox(type){
  const titles = {email:'Send / Receive Email', projects:'Project Progress', requests:'New Request', contacts:'Contact Advisers', 
                  recipes:'Add Recipe', kitchen:'Kitchen Timer', cleaning:'Cleaning Guide'};
  const modal = document.createElement('div');
  modal.style.cssText = `position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:30;`;
  modal.innerHTML = `
    <div style="background:#111;padding:2rem;border-radius:16px;max-width:90%;max-height:90%;overflow:auto;">
      <h2 style="margin-bottom:1rem;">${titles[type]}</h2>
      <div id="modalContent"></div>
      <button onclick="this.closest('div').parentNode.remove()" style="margin-top:1rem;padding:0.5rem 1rem;background:#e91e63;border:none;border-radius:8px;color:#fff;cursor:pointer;">Close</button>
    </div>`;
  document.body.appendChild(modal);
  fillModal(type,modal.querySelector('#modalContent'));
}
function fillModal(type,container){
  if(type==='email'){
    container.innerHTML = `<textarea placeholder="Compose…" style="width:100%;height:150px;background:#222;color:#fff;padding:0.8rem;border-radius:8px;"></textarea>
      <button onclick="alert('Email sent!')" style="margin-top:0.5rem;padding:0.5rem 1rem;background:#4caf50;border:none;border-radius:8px;color:#fff;cursor:pointer;">Send</button>`;
  }
  else if(type==='projects'){
    container.innerHTML = `<label>Progress (%): <input type="range" min="0" max="100" value="45" onchange="this.nextElementSibling.textContent=this.value+'%'"> <span>45%</span></label>`;
  }
  else if(type==='requests'){
    container.innerHTML = `<select style="width:100%;padding:0.5rem;margin-bottom:0.5rem;background:#222;color:#fff;border-radius:8px;">
      <option>Transfer Request</option><option>New Proposal</option></select>
      <button onclick="alert('Request submitted!')" style="margin-top:0.5rem;padding:0.5rem 1rem;background:#2196f3;border:none;border-radius:8px;color:#fff;cursor:pointer;">Submit</button>`;
  }
  else if(type==='contacts'){
    container.innerHTML = `<input type="text" placeholder="Search contact…" style="width:100%;padding:0.5rem;background:#222;color:#fff;border-radius:8px;">`;
  }
  else if(type==='recipes'){
    container.innerHTML = `<input type="text" placeholder="Recipe name" style="width:100%;padding:0.5rem;background:#222;color:#fff;border-radius:8px;margin-bottom:0.5rem;">
      <textarea placeholder="Ingredients & steps…" style="width:100%;height:120px;background:#222;color:#fff;padding:0.5rem;border-radius:8px;"></textarea>
      <input type="datetime-local" style="margin-top:0.5rem;">
      <button onclick="alert('Recipe saved!')" style="margin-top:0.5rem;padding:0.5rem 1rem;background:#ff9800;border:none;border-radius:8px;color:#fff;cursor:pointer;">Save</button>`;
  }
  else if(type==='kitchen'){
    container.innerHTML = `<input type="text" placeholder="What are you cooking?" style="width:100%;padding:0.5rem;background:#222;color:#fff;border-radius:8px;margin-bottom:0.5rem;">
      <button onclick="startTimer()" style="padding:0.5rem 1rem;background:#ff5722;border:none;border-radius:8px;color:#fff;cursor:pointer;">Set Timer</button>`;
  }
  else if(type==='cleaning'){
    container.innerHTML = `<input type="text" placeholder="What needs cleaning?" style="width:100%;padding:0.5rem;background:#222;color:#fff;border-radius:8px;">
      <button onclick="alert('Cleaning guide: …')" style="margin-top:0.5rem;padding:0.5rem 1rem;background:#9c27b0;border:none;border-radius:8px;color:#fff;cursor:pointer;">Get Guide</button>`;
  }
}

// ---------- News widget ----------
let newsExpanded = false;
function toggleNews(){
  const widget = document.getElementById('newsWidget');
  newsExpanded = !newsExpanded;
  widget.classList.toggle('expanded',newsExpanded);
  if(newsExpanded){
    document.getElementById('newsContent').innerHTML = `<h4>Latest News</h4>
      <p><strong>Oct 28 – Project Alpha</strong><br>Phase 2 approved.</p>
      <p><strong>Oct 27 – Kitchen Tip</strong><br>Use lemon to remove stains.</p>
      <p>Tap again to collapse.</p>`;
  }else{
    document.getElementById('newsContent').innerHTML = `<strong>News</strong>`;
  }
}

// ---------- Simple AI chat (local) ----------
function sendAI(){
  const input = document.getElementById('aiInput');
  const msg = input.value.trim();
  if(!msg) return;
  addMessage(msg,'user');
  input.value='';

  // ---- Very small local AI logic ----
  let reply = "I'm here to help!";
  if(msg.toLowerCase().includes('timer')) reply = "Set a timer? Tell me minutes.";
  else if(msg.toLowerCase().includes('expire')) reply = "Check your Home page – items near expiry are highlighted.";
  else if(msg.toLowerCase().includes('clean')) reply = "Open Cleaning Help box for step-by-step guides.";
  setTimeout(()=>addMessage(reply,'ai'),600);
}
function addMessage(text,who){
  const chat = document.getElementById('chat');
  const div = document.createElement('div');
  div.className = `message ${who}`;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
function startTimer(){
  const mins = prompt("Minutes?");
  if(mins) alert(`Timer set for ${mins} min – I'll ping you!`);
}

// ---------- Pill updates (demo) ----------
setInterval(()=>{
  const pills = ['emailPill','projPill','reqPill','contPill'];
  pills.forEach(id=>document.getElementById(id).textContent = Math.floor(Math.random()*5));
},8000);

// Initial page
showPage('work');
</script>
</body>
</html>